\doxysection{gecko\+\_\+sdk\+\_\+4.4.4/platform/emlib/src/em\+\_\+core.c File Reference}
\hypertarget{em__core_8c}{}\label{em__core_8c}\index{gecko\_sdk\_4.4.4/platform/emlib/src/em\_core.c@{gecko\_sdk\_4.4.4/platform/emlib/src/em\_core.c}}


Core interrupt handling API.  


{\ttfamily \#include "{}em\+\_\+core.\+h"{}}\newline
{\ttfamily \#include "{}sl\+\_\+assert.\+h"{}}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structdwt__cycle__counter__handle__t}{dwt\+\_\+cycle\+\_\+counter\+\_\+handle\+\_\+t}}
\end{DoxyCompactItemize}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{em__core_8c_ae4ec0cf323631243d122be29ed5624c6}{CORE\+\_\+\+INTERRUPT\+\_\+\+ENTRY}}()
\item 
\#define \mbox{\hyperlink{em__core_8c_a672ddcad939a4b922b35204d6a857027}{CORE\+\_\+\+INTERRUPT\+\_\+\+EXIT}}()
\item 
SL\+\_\+\+WEAK void \mbox{\hyperlink{group__core_gaf384443e32a4071dadbb233b4393da6e}{CORE\+\_\+\+Critical\+Disable\+Irq}} (void)
\begin{DoxyCompactList}\small\item\em Disable interrupts. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK void \mbox{\hyperlink{group__core_ga078f6bb5611b651ac8858a591709e902}{CORE\+\_\+\+Critical\+Enable\+Irq}} (void)
\begin{DoxyCompactList}\small\item\em Enable interrupts. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK \mbox{\hyperlink{group__core_ga4b715be4b95b8b0ac6c7b188f517177b}{CORE\+\_\+irq\+State\+\_\+t}} \mbox{\hyperlink{group__core_gaad120bd5b22253eab8b42bca9c551cad}{CORE\+\_\+\+Enter\+Critical}} (void)
\begin{DoxyCompactList}\small\item\em Enter a CRITICAL section. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK void \mbox{\hyperlink{group__core_ga9f608029001648939e15102bba7f7a9f}{CORE\+\_\+\+Exit\+Critical}} (\mbox{\hyperlink{group__core_ga4b715be4b95b8b0ac6c7b188f517177b}{CORE\+\_\+irq\+State\+\_\+t}} irq\+State)
\begin{DoxyCompactList}\small\item\em Exit a CRITICAL section. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK void \mbox{\hyperlink{group__core_gaee798e8544d1b6600f1be7bbab08edd6}{CORE\+\_\+\+Yield\+Critical}} (void)
\begin{DoxyCompactList}\small\item\em Brief interrupt enable/disable sequence to allow handling of pending interrupts. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK void \mbox{\hyperlink{group__core_ga7ccdad7ebed113fe7340844fb2be3754}{CORE\+\_\+\+Atomic\+Disable\+Irq}} (void)
\begin{DoxyCompactList}\small\item\em Disable interrupts. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK void \mbox{\hyperlink{group__core_ga361a96a6ad2569718a8252c59f12c4d4}{CORE\+\_\+\+Atomic\+Enable\+Irq}} (void)
\begin{DoxyCompactList}\small\item\em Enable interrupts. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK \mbox{\hyperlink{group__core_ga4b715be4b95b8b0ac6c7b188f517177b}{CORE\+\_\+irq\+State\+\_\+t}} \mbox{\hyperlink{group__core_gad1a6366f682c89e79ec6d9eb306db29e}{CORE\+\_\+\+Enter\+Atomic}} (void)
\begin{DoxyCompactList}\small\item\em Enter an ATOMIC section. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK void \mbox{\hyperlink{group__core_gadfb8f7b1d6d20ef12400accff1020b7d}{CORE\+\_\+\+Exit\+Atomic}} (\mbox{\hyperlink{group__core_ga4b715be4b95b8b0ac6c7b188f517177b}{CORE\+\_\+irq\+State\+\_\+t}} irq\+State)
\begin{DoxyCompactList}\small\item\em Exit an ATOMIC section. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK void \mbox{\hyperlink{group__core_gae9ee2196a41f59f38a822fad70878a84}{CORE\+\_\+\+Yield\+Atomic}} (void)
\begin{DoxyCompactList}\small\item\em Brief interrupt enable/disable sequence to allow handling of pending interrupts. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_ga510268c9357cb2cffddd9dd75ddf7fab}{CORE\+\_\+\+Enter\+Nvic\+Mask}} (\mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}nvic\+State, const \mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}disable)
\begin{DoxyCompactList}\small\item\em Enter a NVIC mask section. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_ga818266df617b6e900b124d30f4cf7db4}{CORE\+\_\+\+Nvic\+Disable\+Mask}} (const \mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}disable)
\begin{DoxyCompactList}\small\item\em Disable NVIC interrupts. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_gafd594b0671e10977a3655f289439af09}{CORE\+\_\+\+Nvic\+Enable\+Mask}} (const \mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}enable)
\begin{DoxyCompactList}\small\item\em Set current NVIC interrupt enable mask. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_ga3c84177a6c8922b997d9a0bb94ec0ff9}{CORE\+\_\+\+Yield\+Nvic\+Mask}} (const \mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}enable)
\begin{DoxyCompactList}\small\item\em Brief NVIC interrupt enable/disable sequence to allow handling of pending interrupts. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_ga74cc1f2c3a9c786f1108eba8305b4a02}{CORE\+\_\+\+Nvic\+Mask\+Set\+IRQ}} (\mbox{\hyperlink{group___e_f_m32_g_g990_f1024_ga4a0206df9604302e0741c1aa4ca1ded3}{IRQn\+\_\+\+Type}} irqN, \mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}mask)
\begin{DoxyCompactList}\small\item\em Utility function to set an IRQn bit in a NVIC enable/disable mask. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_ga9cf82cce035328e4558db771ecfe8720}{CORE\+\_\+\+Nvic\+Mask\+Clear\+IRQ}} (\mbox{\hyperlink{group___e_f_m32_g_g990_f1024_ga4a0206df9604302e0741c1aa4ca1ded3}{IRQn\+\_\+\+Type}} irqN, \mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}mask)
\begin{DoxyCompactList}\small\item\em Utility function to clear an IRQn bit in a NVIC enable/disable mask. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK bool \mbox{\hyperlink{group__core_gad34f8d99ce6fde2253aef9729d7467bc}{CORE\+\_\+\+In\+Irq\+Context}} (void)
\begin{DoxyCompactList}\small\item\em Check whether the current CPU operation mode is handler mode. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK bool \mbox{\hyperlink{group__core_gafbb1265e4740eb07f50b8207c72e94f8}{CORE\+\_\+\+Irq\+Is\+Blocked}} (\mbox{\hyperlink{group___e_f_m32_g_g990_f1024_ga4a0206df9604302e0741c1aa4ca1ded3}{IRQn\+\_\+\+Type}} irqN)
\begin{DoxyCompactList}\small\item\em Check if a specific interrupt is disabled or blocked. \end{DoxyCompactList}\item 
SL\+\_\+\+WEAK bool \mbox{\hyperlink{group__core_gae46de7cf4cbba4462fafd19d94ba0b09}{CORE\+\_\+\+Irq\+Is\+Disabled}} (void)
\begin{DoxyCompactList}\small\item\em Check if interrupts are disabled. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_gaaa32f111ee6cdd5e854b489a04a79b68}{CORE\+\_\+\+Get\+Nvic\+Enabled\+Mask}} (\mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}mask)
\begin{DoxyCompactList}\small\item\em Get the current NVIC enable mask state. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{group__core_gaadb9b9a49a92a6857c600cffb4a8b384}{CORE\+\_\+\+Get\+Nvic\+Mask\+Disable\+State}} (const \mbox{\hyperlink{struct_c_o_r_e__nvic_mask__t}{CORE\+\_\+nvic\+Mask\+\_\+t}} \texorpdfstring{$\ast$}{*}mask)
\begin{DoxyCompactList}\small\item\em Get NVIC disable state for a given mask. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{group__core_ga788fc3ea8bf0a931e5b3c9266a543c25}{CORE\+\_\+\+Nvic\+IRQDisabled}} (\mbox{\hyperlink{group___e_f_m32_g_g990_f1024_ga4a0206df9604302e0741c1aa4ca1ded3}{IRQn\+\_\+\+Type}} irqN)
\begin{DoxyCompactList}\small\item\em Check if an NVIC interrupt is disabled. \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{group__core_ga68c6a016bb6c8b59618aa256a718e8f0}{CORE\+\_\+\+Get\+Nvic\+Ram\+Table\+Handler}} (\mbox{\hyperlink{group___e_f_m32_g_g990_f1024_ga4a0206df9604302e0741c1aa4ca1ded3}{IRQn\+\_\+\+Type}} irqN)
\begin{DoxyCompactList}\small\item\em Utility function to get the handler for a specific interrupt. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_gaff18df16b51922db178fed08846f2814}{CORE\+\_\+\+Set\+Nvic\+Ram\+Table\+Handler}} (\mbox{\hyperlink{group___e_f_m32_g_g990_f1024_ga4a0206df9604302e0741c1aa4ca1ded3}{IRQn\+\_\+\+Type}} irqN, void \texorpdfstring{$\ast$}{*}handler)
\begin{DoxyCompactList}\small\item\em Utility function to set the handler for a specific interrupt. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__core_gaea8eb75f2f2a86503a47bf96c76ae332}{CORE\+\_\+\+Init\+Nvic\+Vector\+Table}} (uint32\+\_\+t \texorpdfstring{$\ast$}{*}source\+Table, uint32\+\_\+t source\+Size, uint32\+\_\+t \texorpdfstring{$\ast$}{*}target\+Table, uint32\+\_\+t target\+Size, void \texorpdfstring{$\ast$}{*}default\+Handler, bool overwrite\+Active)
\begin{DoxyCompactList}\small\item\em Initialize an interrupt vector table by copying table entries from a source to a target table. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Core interrupt handling API. 

\hypertarget{em__core_8c_autotoc_md109}{}\doxysubsection{\texorpdfstring{License}{License}}\label{em__core_8c_autotoc_md109}
{\bfseries{Copyright 2018 Silicon Laboratories Inc. www.\+silabs.\+com}}

SPDX-\/\+License-\/\+Identifier\+: Zlib

The licensor of this software is Silicon Laboratories Inc.

This software is provided \textquotesingle{}as-\/is\textquotesingle{}, without any express or implied warranty. In no event will the authors be held liable for any damages arising from the use of this software.

Permission is granted to anyone to use this software for any purpose, including commercial applications, and to alter it and redistribute it freely, subject to the following restrictions\+:


\begin{DoxyEnumerate}
\item The origin of this software must not be misrepresented; you must not claim that you wrote the original software. If you use this software in a product, an acknowledgment in the product documentation would be appreciated but is not required.
\item Altered source versions must be plainly marked as such, and must not be misrepresented as being the original software.
\item This notice may not be removed or altered from any source distribution. 
\end{DoxyEnumerate}

\doxysubsection{Macro Definition Documentation}
\Hypertarget{em__core_8c_ae4ec0cf323631243d122be29ed5624c6}\index{em\_core.c@{em\_core.c}!CORE\_INTERRUPT\_ENTRY@{CORE\_INTERRUPT\_ENTRY}}
\index{CORE\_INTERRUPT\_ENTRY@{CORE\_INTERRUPT\_ENTRY}!em\_core.c@{em\_core.c}}
\doxysubsubsection{\texorpdfstring{CORE\_INTERRUPT\_ENTRY}{CORE\_INTERRUPT\_ENTRY}}
{\footnotesize\ttfamily \label{em__core_8c_ae4ec0cf323631243d122be29ed5624c6} 
\#define CORE\+\_\+\+INTERRUPT\+\_\+\+ENTRY(\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

~\newline
 \hypertarget{em__core_8c_core_intro}{}\doxysubsection{\texorpdfstring{Introduction}{Introduction}}\label{em__core_8c_core_intro}
CORE interrupt API provides a simple and safe means to disable and enable interrupts to protect sections of code.

This is often referred to as "{}critical sections"{}. This module provides support for three types of critical sections, each with different interrupt blocking capabilities.

\begin{DoxyItemize}
\item {\bfseries{CRITICAL}} section\+: Inside a critical section, all interrupts are disabled (except for fault handlers). The PRIMASK register is always used for interrupt disable/enable. \item {\bfseries{ATOMIC}} section\+: This type of section is configurable and the default method is to use PRIMASK. With BASEPRI configuration, interrupts with priority equal to or lower than a given configurable level are disabled. The interrupt disable priority level is defined at compile time. The BASEPRI register is not available for all architectures. \item {\bfseries{NVIC mask}} section\+: Disable NVIC (external interrupts) on an individual manner.\end{DoxyItemize}
em\+\_\+core also has an API for manipulating RAM-\/based interrupt vector tables. ~\newline
 \hypertarget{em__core_8c_core_conf}{}\doxysubsection{\texorpdfstring{Compile-\/time Configuration}{Compile-\/time Configuration}}\label{em__core_8c_core_conf}
The following \#defines are used to configure em\+\_\+core\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ The\ interrupt\ priority\ level\ used\ inside\ ATOMIC\ sections.}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ CORE\_ATOMIC\_BASE\_PRIORITY\_LEVEL\ \ \ \ 3}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//\ A\ method\ used\ for\ interrupt\ disable/enable\ within\ ATOMIC\ sections.}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ CORE\_ATOMIC\_METHOD\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CORE\_ATOMIC\_METHOD\_PRIMASK}}

\end{DoxyCode}


If the default values do not support your needs, they can be overridden by supplying -\/D compiler flags on the compiler command line or by collecting all macro redefinitions in a file named {\itshape emlib\+\_\+config.\+h} and then supplying -\/DEMLIB\+\_\+\+USER\+\_\+\+CONFIG on a compiler command line.

\begin{DoxyNote}{Note}
The default emlib configuration for ATOMIC section interrupt disable method is using PRIMASK, i.\+e., ATOMIC sections are implemented as CRITICAL sections.

Due to architectural limitations Cortex-\/\+M0+ devices do not support ATOMIC type critical sections using the BASEPRI register. On M0+ devices ATOMIC section helper macros are available but they are implemented as CRITICAL sections using PRIMASK register. ~\newline
 
\end{DoxyNote}
\hypertarget{em__core_8c_core_macro_api}{}\doxysubsection{\texorpdfstring{Macro API}{Macro API}}\label{em__core_8c_core_macro_api}
The primary em\+\_\+core API is the macro API. Macro API will map to correct CORE functions according to the selected \doxylink{group__core_ga3a3362b0f3a8415dcae958dfda16b8e2}{CORE\+\_\+\+ATOMIC\+\_\+\+METHOD} and similar configurations (the full CORE API is of course also available). The most useful macros are as follows\+:

\doxylink{group__core_ga770acbc9bf18f2204fd1d81c65bcad07}{CORE\+\_\+\+DECLARE\+\_\+\+IRQ\+\_\+\+STATE} ~\newline
 \doxylink{group__core_ga3fd462e452e25b08b0c4277997ca7900}{CORE\+\_\+\+ENTER\+\_\+\+ATOMIC()} ~\newline
 \doxylink{group__core_ga3190046f0bfe04980d45e624652f6c08}{@n} Used together to implement an ATOMIC section. 
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga770acbc9bf18f2204fd1d81c65bcad07}{CORE\_DECLARE\_IRQ\_STATE}};\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Storage\ for\ saving\ IRQ\ state\ prior\ to}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ atomic\ section\ entry.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga3fd462e452e25b08b0c4277997ca7900}{CORE\_ENTER\_ATOMIC}}();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Enter\ atomic\ section.}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ ...}
\DoxyCodeLine{\ \ ...\ your\ code\ goes\ here\ ...}
\DoxyCodeLine{\ \ ...}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga3190046f0bfe04980d45e624652f6c08}{CORE\_EXIT\_ATOMIC}}();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Exit\ atomic\ section,\ IRQ\ state\ is\ restored.}}
\DoxyCodeLine{\}}

\end{DoxyCode}


~\newline
 \doxylink{group__core_ga3b0354ed174362818a7e22916917d43a}{@n} A concatenation of all three macros above. 
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga3b0354ed174362818a7e22916917d43a}{CORE\_ATOMIC\_SECTION}}(}
\DoxyCodeLine{\ \ \ \ ...}
\DoxyCodeLine{\ \ \ \ ...\ your\ code\ goes\ here\ ...}
\DoxyCodeLine{\ \ \ \ ...}
\DoxyCodeLine{\ \ )}
\DoxyCodeLine{\}}

\end{DoxyCode}


~\newline
 \doxylink{group__core_ga770acbc9bf18f2204fd1d81c65bcad07}{CORE\+\_\+\+DECLARE\+\_\+\+IRQ\+\_\+\+STATE} ~\newline
 \doxylink{group__core_gabb488bf5398a45fb21d1388da085dead}{CORE\+\_\+\+ENTER\+\_\+\+CRITICAL()} ~\newline
 \doxylink{group__core_gaae5e49de8ff7edcc91752b613b64442e}{CORE\+\_\+\+EXIT\+\_\+\+CRITICAL()} ~\newline
 \doxylink{group__core_gad817d908619afc82a790744650da0e28}{@n} These macros implement CRITICAL sections in a similar fashion as described above for ATOMIC sections.

~\newline
 \doxylink{group__core_ga48fa5531aa876b474dcb262d883a49fb}{CORE\+\_\+\+DECLARE\+\_\+\+NVIC\+\_\+\+STATE} ~\newline
 \doxylink{group__core_gaed344c90cda4ba26bc1753621404ef3f}{CORE\+\_\+\+ENTER\+\_\+\+NVIC()} ~\newline
 \doxylink{group__core_ga65a6e410088e47a9da533583371ac598}{CORE\+\_\+\+EXIT\+\_\+\+NVIC()} ~\newline
 \doxylink{group__core_ga8d8bb1ba3793bf2a876db528ce4fa38c}{@n} These macros implement NVIC mask sections in a similar fashion as described above for ATOMIC sections. See \doxysectlink{em__core_8c_core_examples}{Examples}{1} for an example.

Refer to {\itshape Macros} or {\itshape Macro Definition Documentation} below for a full list of macros. ~\newline
 \hypertarget{em__core_8c_core_reimplementation}{}\doxysubsection{\texorpdfstring{API reimplementation}{API reimplementation}}\label{em__core_8c_core_reimplementation}
Most of the functions in the API are implemented as weak functions. This means that it is easy to reimplement when special needs arise. Shown below is a reimplementation of CRITICAL sections suitable if Free\+RTOS OS is used\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{group__core_ga4b715be4b95b8b0ac6c7b188f517177b}{CORE\_irqState\_t}}\ \mbox{\hyperlink{group__core_gaad120bd5b22253eab8b42bca9c551cad}{CORE\_EnterCritical}}(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ vPortEnterCritical();}
\DoxyCodeLine{\ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__core_ga9f608029001648939e15102bba7f7a9f}{CORE\_ExitCritical}}(\mbox{\hyperlink{group__core_ga4b715be4b95b8b0ac6c7b188f517177b}{CORE\_irqState\_t}}\ irqState)}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ (void)irqState;}
\DoxyCodeLine{\ \ vPortExitCritical();}
\DoxyCodeLine{\}}

\end{DoxyCode}
 Also note that CORE\+\_\+\+Enter/\+Exit\+Critical() are not implemented as inline functions. As a result, reimplementations will be possible even when original implementations are inside a linked library.

Some RTOSes must be notified on interrupt handler entry and exit. Macros \doxylink{em__core_8c_ae4ec0cf323631243d122be29ed5624c6}{CORE\+\_\+\+INTERRUPT\+\_\+\+ENTRY()} and \doxylink{em__core_8c_a672ddcad939a4b922b35204d6a857027}{CORE\+\_\+\+INTERRUPT\+\_\+\+EXIT()} are suitable placeholders for inserting such code. Insert these macros in all your interrupt handlers and then override the default macro implementations. This is an example if u\+C/\+OS is used\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{//\ In\ emlib\_config.h:}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ CORE\_INTERRUPT\_ENTRY()\ \ \ OSIntEnter()}}
\DoxyCodeLine{\textcolor{preprocessor}{\#define\ CORE\_INTERRUPT\_EXIT()\ \ \ \ OSIntExit()}}

\end{DoxyCode}
 ~\newline
 \hypertarget{em__core_8c_core_vector_tables}{}\doxysubsection{\texorpdfstring{Interrupt vector tables}{Interrupt vector tables}}\label{em__core_8c_core_vector_tables}
When using RAM based interrupt vector tables it is the user\textquotesingle{}s responsibility to allocate the table space correctly. The tables must be aligned as specified in the CPU reference manual.

\doxylink{group__core_gaea8eb75f2f2a86503a47bf96c76ae332}{@n} Initialize a RAM based vector table by copying table entries from a source vector table to a target table. VTOR is set to the address of the target vector table.

~\newline
 \doxylink{group__core_ga68c6a016bb6c8b59618aa256a718e8f0}{CORE\+\_\+\+Get\+Nvic\+Ram\+Table\+Handler()} ~\newline
 \doxylink{group__core_gaff18df16b51922db178fed08846f2814}{@n} Use these functions to get or set the interrupt handler for a specific IRQn. They both use the interrupt vector table defined by the current VTOR register value. ~\newline
 \hypertarget{em__core_8c_core_max_timing}{}\doxysubsection{\texorpdfstring{Maximum Interrupt Disabled Time}{Maximum Interrupt Disabled Time}}\label{em__core_8c_core_max_timing}
The maximum time spent (in cycles) in critical and atomic sections can be measured for performance and interrupt latency analysis. To enable the timings, use the SL\+\_\+\+EMLIB\+\_\+\+CORE\+\_\+\+ENABLE\+\_\+\+INTERRUPT\+\_\+\+DISABLED\+\_\+\+TIMING configuration option. When enabled, the functions ~\newline
 CORE\+\_\+get\+\_\+max\+\_\+time\+\_\+critical\+\_\+section() ~\newline
 CORE\+\_\+get\+\_\+max\+\_\+time\+\_\+atomic\+\_\+section() ~\newline
 can be used to get the max timings since startup. ~\newline
 \hypertarget{em__core_8c_core_examples}{}\doxysubsection{\texorpdfstring{Examples}{Examples}}\label{em__core_8c_core_examples}
Implement an NVIC critical section\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga116f3ebd47a391ed8f3eeccdc7b644bc}{CORE\_DECLARE\_NVIC\_ZEROMASK}}(mask);\ \textcolor{comment}{//\ A\ zero\ initialized\ NVIC\ disable\ mask}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ Set\ mask\ bits\ for\ IRQs\ to\ block\ in\ the\ NVIC\ critical\ section.}}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ In\ many\ cases,\ you\ can\ create\ the\ disable\ mask\ once\ upon\ application}}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ startup\ and\ use\ the\ mask\ globally\ throughout\ the\ application\ lifetime.}}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga74cc1f2c3a9c786f1108eba8305b4a02}{CORE\_NvicMaskSetIRQ}}(\mbox{\hyperlink{group___e_f_m32_g_g990_f1024_gga666eb0caeb12ec0e281415592ae89083aec264fbd30773baa0059e993260b845a}{LEUART0\_IRQn}},\ \&mask);}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga74cc1f2c3a9c786f1108eba8305b4a02}{CORE\_NvicMaskSetIRQ}}(\mbox{\hyperlink{group___e_f_m32_g_g990_f1024_gga666eb0caeb12ec0e281415592ae89083ae51ac365d90523f2d68ec5689b4d1c9c}{VCMP\_IRQn}},\ \ \ \ \&mask);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ Enter\ NVIC\ critical\ section\ with\ the\ disable\ mask}}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga8d8bb1ba3793bf2a876db528ce4fa38c}{CORE\_NVIC\_SECTION}}(\&mask,}
\DoxyCodeLine{\ \ \ \ ...}
\DoxyCodeLine{\ \ \ \ ...\ your\ code\ goes\ here\ ...}
\DoxyCodeLine{\ \ \ \ ...}
\DoxyCodeLine{\ \ )}
\DoxyCodeLine{\}}

\end{DoxyCode}
 ~\newline
 \hypertarget{em__core_8c_core_porting}{}\doxysubsection{\texorpdfstring{Porting from em\+\_\+int}{Porting from em\+\_\+int}}\label{em__core_8c_core_porting}
Existing code using INT\+\_\+\+Enable() and INT\+\_\+\+Disable() must be ported to the em\+\_\+core API. While em\+\_\+int used, a global counter to store the interrupt state, em\+\_\+core uses a local variable. Any usage of INT\+\_\+\+Disable(), therefore, needs to be replaced with a declaration of the interrupt state variable before entering the critical section.

Since the state variable is in local scope, the critical section exit needs to occur within the scope of the variable. If multiple nested critical sections are used, each needs to have its own state variable in its own scope.

In many cases, completely disabling all interrupts using CRITICAL sections might be more heavy-\/handed than needed. When porting, consider whether other types of sections, such as ATOMIC or NVIC mask, can be used to only disable a subset of the interrupts.

Replacing em\+\_\+int calls with em\+\_\+core function calls\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ func(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ INT\_Disable();}}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga770acbc9bf18f2204fd1d81c65bcad07}{CORE\_DECLARE\_IRQ\_STATE}};}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga3fd462e452e25b08b0c4277997ca7900}{CORE\_ENTER\_ATOMIC}}();}
\DoxyCodeLine{\ \ \ \ .}
\DoxyCodeLine{\ \ \ \ .}
\DoxyCodeLine{\ \ \ \ .}
\DoxyCodeLine{\ \ \textcolor{comment}{//\ INT\_Enable();}}
\DoxyCodeLine{\ \ \mbox{\hyperlink{group__core_ga3190046f0bfe04980d45e624652f6c08}{CORE\_EXIT\_ATOMIC}}();}
\DoxyCodeLine{\}}

\end{DoxyCode}
 Placeholder for optional interrupt handler entry code. This might be needed when working with an RTOS. \Hypertarget{em__core_8c_a672ddcad939a4b922b35204d6a857027}\index{em\_core.c@{em\_core.c}!CORE\_INTERRUPT\_EXIT@{CORE\_INTERRUPT\_EXIT}}
\index{CORE\_INTERRUPT\_EXIT@{CORE\_INTERRUPT\_EXIT}!em\_core.c@{em\_core.c}}
\doxysubsubsection{\texorpdfstring{CORE\_INTERRUPT\_EXIT}{CORE\_INTERRUPT\_EXIT}}
{\footnotesize\ttfamily \label{em__core_8c_a672ddcad939a4b922b35204d6a857027} 
\#define CORE\+\_\+\+INTERRUPT\+\_\+\+EXIT(\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

Placeholder for optional interrupt handler exit code. This might be needed when working with an RTOS. 