\doxysection{em\+\_\+bus.\+h}
\hypertarget{em__bus_8h_source}{}\label{em__bus_8h_source}\index{snake/gecko\_sdk\_4.4.4/platform/emlib/inc/em\_bus.h@{snake/gecko\_sdk\_4.4.4/platform/emlib/inc/em\_bus.h}}
\mbox{\hyperlink{em__bus_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#ifndef\ EM\_BUS\_H}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#define\ EM\_BUS\_H}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{sl__assert_8h}{sl\_assert.h}}"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{em__core_8h}{em\_core.h}}"{}}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{em__device_8h}{em\_device.h}}"{}}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00039\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00050\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00070\ \_\_STATIC\_INLINE\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__bus_ga5db07d1f35d501e6de6891eaeae88ec7}{BUS\_RamBitWrite}}(\textcolor{keyword}{volatile}\ uint32\_t\ *addr,}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bit,}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ val)}
\DoxyCodeLine{00073\ \{}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#if\ defined(BITBAND\_RAM\_BASE)}}
\DoxyCodeLine{00075\ \ \ uint32\_t\ aliasAddr\ =}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_ga621a194f1cd2f0c9282e72583326a359}{BITBAND\_RAM\_BASE}}\ +\ (((uint32\_t)addr\ -\/\ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_ga05e8f3d2e5868754a7cd88614955aecc}{SRAM\_BASE}})\ *\ (uint32\_t)\ 32)\ +\ (bit\ *\ (uint32\_t)\ 4);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr\ =\ (uint32\_t)val;}
\DoxyCodeLine{00079\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00080\ \ \ uint32\_t\ tmp\ =\ *addr;}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \textcolor{comment}{/*\ Make\ sure\ val\ is\ not\ more\ than\ 1\ because\ only\ one\ bit\ needs\ to\ be\ set.\ */}}
\DoxyCodeLine{00083\ \ \ *addr\ =\ (tmp\ \&\ \string~(1UL\ <<\ bit))\ |\ ((val\ \&\ 1UL)\ <<\ bit);}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00085\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00108\ \_\_STATIC\_INLINE\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{group__bus_ga00e7633614955dd90f180acb07f83c8d}{BUS\_RamBitRead}}(\textcolor{keyword}{volatile}\ \textcolor{keyword}{const}\ uint32\_t\ *addr,}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bit)}
\DoxyCodeLine{00110\ \{}
\DoxyCodeLine{00111\ \textcolor{preprocessor}{\#if\ defined(BITBAND\_RAM\_BASE)}}
\DoxyCodeLine{00112\ \ \ uint32\_t\ aliasAddr\ =}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_ga621a194f1cd2f0c9282e72583326a359}{BITBAND\_RAM\_BASE}}\ +\ (((uint32\_t)addr\ -\/\ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_ga05e8f3d2e5868754a7cd88614955aecc}{SRAM\_BASE}})\ *\ (uint32\_t)\ 32)\ +\ (bit\ *\ (uint32\_t)\ 4);}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \textcolor{keywordflow}{return}\ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr;}
\DoxyCodeLine{00116\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00117\ \ \ \textcolor{keywordflow}{return}\ ((*addr)\ >>\ bit)\ \&\ 1UL;}
\DoxyCodeLine{00118\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00119\ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00141\ \_\_STATIC\_INLINE\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__bus_gaf8574f14855448ecae32c5a9dd0c7164}{BUS\_RegBitWrite}}(\textcolor{keyword}{volatile}\ uint32\_t\ *addr,}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bit,}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ val)}
\DoxyCodeLine{00144\ \{}
\DoxyCodeLine{00145\ \ \ \mbox{\hyperlink{sl__assert_8h_a4c13f77871c72eef527f492ed16e38b4}{EFM\_ASSERT}}(bit\ <\ 32U);}
\DoxyCodeLine{00146\ \textcolor{preprocessor}{\#if\ defined(PER\_REG\_BLOCK\_SET\_OFFSET)\ \&\&\ defined(PER\_REG\_BLOCK\_CLR\_OFFSET)}}
\DoxyCodeLine{00147\ \ \ uint32\_t\ aliasAddr;}
\DoxyCodeLine{00148\ \ \ \textcolor{keywordflow}{if}\ (val\ !=\ 0U)\ \{}
\DoxyCodeLine{00149\ \ \ \ \ aliasAddr\ =\ (uint32\_t)addr\ +\ PER\_REG\_BLOCK\_SET\_OFFSET;}
\DoxyCodeLine{00150\ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00151\ \ \ \ \ aliasAddr\ =\ (uint32\_t)addr\ +\ PER\_REG\_BLOCK\_CLR\_OFFSET;}
\DoxyCodeLine{00152\ \ \ \}}
\DoxyCodeLine{00153\ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr\ =\ 1UL\ <<\ bit;}
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#elif\ defined(BITBAND\_PER\_BASE)}}
\DoxyCodeLine{00155\ \ \ uint32\_t\ aliasAddr\ =}
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_gaf6996efc26e41442689b5aa0b6bbd418}{BITBAND\_PER\_BASE}}\ +\ (((uint32\_t)addr\ -\/\ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_ga46ab71255f6da2fcd617bd33dfb3c202}{PER\_MEM\_BASE}})\ *\ (uint32\_t)\ 32)\ +\ (bit\ *\ (uint32\_t)\ 4);}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr\ =\ (uint32\_t)val;}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00160\ \ \ uint32\_t\ tmp\ =\ *addr;}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \textcolor{comment}{/*\ Make\ sure\ val\ is\ not\ more\ than\ 1\ because\ only\ one\ bit\ needs\ to\ be\ set.\ */}}
\DoxyCodeLine{00163\ \ \ *addr\ =\ (tmp\ \&\ \string~(1\ <<\ bit))\ |\ ((val\ \&\ 1)\ <<\ bit);}
\DoxyCodeLine{00164\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00165\ \}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00188\ \_\_STATIC\_INLINE\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{group__bus_gaca6b55014161f4c51c9daf4f707eeb7c}{BUS\_RegBitRead}}(\textcolor{keyword}{volatile}\ \textcolor{keyword}{const}\ uint32\_t\ *addr,}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ bit)}
\DoxyCodeLine{00190\ \{}
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#if\ defined(BITBAND\_PER\_BASE)}}
\DoxyCodeLine{00192\ \ \ uint32\_t\ aliasAddr\ =}
\DoxyCodeLine{00193\ \ \ \ \ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_gaf6996efc26e41442689b5aa0b6bbd418}{BITBAND\_PER\_BASE}}\ +\ (((uint32\_t)addr\ -\/\ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_ga46ab71255f6da2fcd617bd33dfb3c202}{PER\_MEM\_BASE}})\ *\ (uint32\_t)32)\ +\ (bit\ *\ (uint32\_t)\ 4);}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \textcolor{keywordflow}{return}\ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr;}
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00197\ \ \ \textcolor{keywordflow}{return}\ ((*addr)\ >>\ bit)\ \&\ 1UL;}
\DoxyCodeLine{00198\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00199\ \}}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00221\ \_\_STATIC\_INLINE\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__bus_ga8225a5d4acac280abb182dc118e8df77}{BUS\_RegMaskedSet}}(\textcolor{keyword}{volatile}\ uint32\_t\ *addr,}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ mask)}
\DoxyCodeLine{00223\ \{}
\DoxyCodeLine{00224\ \textcolor{preprocessor}{\#if\ defined(PER\_REG\_BLOCK\_SET\_OFFSET)}}
\DoxyCodeLine{00225\ \ \ uint32\_t\ aliasAddr\ =\ (uint32\_t)addr\ +\ PER\_REG\_BLOCK\_SET\_OFFSET;}
\DoxyCodeLine{00226\ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr\ =\ mask;}
\DoxyCodeLine{00227\ \textcolor{preprocessor}{\#elif\ defined(PER\_BITSET\_MEM\_BASE)}}
\DoxyCodeLine{00228\ \ \ uint32\_t\ aliasAddr\ =\ PER\_BITSET\_MEM\_BASE\ +\ ((uint32\_t)addr\ -\/\ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_ga46ab71255f6da2fcd617bd33dfb3c202}{PER\_MEM\_BASE}});}
\DoxyCodeLine{00229\ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr\ =\ mask;}
\DoxyCodeLine{00230\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00231\ \ \ \mbox{\hyperlink{group__core_ga770acbc9bf18f2204fd1d81c65bcad07}{CORE\_DECLARE\_IRQ\_STATE}};}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \mbox{\hyperlink{group__core_gabb488bf5398a45fb21d1388da085dead}{CORE\_ENTER\_CRITICAL}}();}
\DoxyCodeLine{00234\ \ \ *addr\ |=\ mask;}
\DoxyCodeLine{00235\ \ \ \mbox{\hyperlink{group__core_gaae5e49de8ff7edcc91752b613b64442e}{CORE\_EXIT\_CRITICAL}}();}
\DoxyCodeLine{00236\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00237\ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00259\ \_\_STATIC\_INLINE\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__bus_gad226bfe478c81d51681539d935241758}{BUS\_RegMaskedClear}}(\textcolor{keyword}{volatile}\ uint32\_t\ *addr,}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ mask)}
\DoxyCodeLine{00261\ \{}
\DoxyCodeLine{00262\ \textcolor{preprocessor}{\#if\ defined(PER\_REG\_BLOCK\_CLR\_OFFSET)}}
\DoxyCodeLine{00263\ \ \ uint32\_t\ aliasAddr\ =\ (uint32\_t)addr\ +\ PER\_REG\_BLOCK\_CLR\_OFFSET;}
\DoxyCodeLine{00264\ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr\ =\ mask;}
\DoxyCodeLine{00265\ \textcolor{preprocessor}{\#elif\ defined(PER\_BITCLR\_MEM\_BASE)}}
\DoxyCodeLine{00266\ \ \ uint32\_t\ aliasAddr\ =\ PER\_BITCLR\_MEM\_BASE\ +\ ((uint32\_t)addr\ -\/\ \mbox{\hyperlink{group___e_f_m32_g_g990_f1024___part_ga46ab71255f6da2fcd617bd33dfb3c202}{PER\_MEM\_BASE}});}
\DoxyCodeLine{00267\ \ \ *(\textcolor{keyword}{volatile}\ uint32\_t\ *)aliasAddr\ =\ mask;}
\DoxyCodeLine{00268\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00269\ \ \ \mbox{\hyperlink{group__core_ga770acbc9bf18f2204fd1d81c65bcad07}{CORE\_DECLARE\_IRQ\_STATE}};}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \mbox{\hyperlink{group__core_gabb488bf5398a45fb21d1388da085dead}{CORE\_ENTER\_CRITICAL}}();}
\DoxyCodeLine{00272\ \ \ *addr\ \&=\ \string~mask;}
\DoxyCodeLine{00273\ \ \ \mbox{\hyperlink{group__core_gaae5e49de8ff7edcc91752b613b64442e}{CORE\_EXIT\_CRITICAL}}();}
\DoxyCodeLine{00274\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00275\ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00301\ \textcolor{preprocessor}{\#if\ defined(\_\_GNUC\_\_)\ \&\&\ \_\_GNUC\_\_\ >=\ 10}}
\DoxyCodeLine{00302\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{00303\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wanalyzer-\/null-\/dereference"{}}}
\DoxyCodeLine{00304\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00305\ \_\_STATIC\_INLINE\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{group__bus_ga9e878ccba24fcbf97b5bcb8b53356e76}{BUS\_RegMaskedWrite}}(\textcolor{keyword}{volatile}\ uint32\_t\ *addr,}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ mask,}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ val)}
\DoxyCodeLine{00308\ \{}
\DoxyCodeLine{00309\ \ \ \mbox{\hyperlink{group__core_ga770acbc9bf18f2204fd1d81c65bcad07}{CORE\_DECLARE\_IRQ\_STATE}};}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \mbox{\hyperlink{group__core_gabb488bf5398a45fb21d1388da085dead}{CORE\_ENTER\_CRITICAL}}();}
\DoxyCodeLine{00312\ \ \ \mbox{\hyperlink{sl__assert_8h_a4c13f77871c72eef527f492ed16e38b4}{EFM\_ASSERT}}(addr\ !=\ 0);}
\DoxyCodeLine{00313\ \ \ *addr\ =\ (*addr\ \&\ \string~mask)\ |\ (val\ \&\ mask);}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \mbox{\hyperlink{group__core_gaae5e49de8ff7edcc91752b613b64442e}{CORE\_EXIT\_CRITICAL}}();}
\DoxyCodeLine{00316\ \}}
\DoxyCodeLine{00317\ \textcolor{preprocessor}{\#if\ defined(\_\_GNUC\_\_)\ \&\&\ \_\_GNUC\_\_\ >=\ 10}}
\DoxyCodeLine{00318\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{00319\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \textcolor{comment}{/***************************************************************************/}}
\DoxyCodeLine{00338\ \_\_STATIC\_INLINE\ uint32\_t\ \mbox{\hyperlink{group__bus_gaec23c86f9b844b9e0e102ebff0b96ff4}{BUS\_RegMaskedRead}}(\textcolor{keyword}{volatile}\ \textcolor{keyword}{const}\ uint32\_t\ *addr,}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint32\_t\ mask)}
\DoxyCodeLine{00340\ \{}
\DoxyCodeLine{00341\ \ \ \textcolor{keywordflow}{return}\ *addr\ \&\ mask;}
\DoxyCodeLine{00342\ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00346\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00347\ \}}
\DoxyCodeLine{00348\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ EM\_BUS\_H\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
